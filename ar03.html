<html>
<head>
  <title>AR3</title>
  <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
  <script src="https://cdn.rawgit.com/donmccurdy/aframe-extras/v4.2.0/dist/aframe-extras.min.js"></script>
  <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
  <style>
    /* 撮影ボタンのスタイルを設定 */
    #captureButton {
      position: fixed;
      bottom: 10px;
      left: 50%;
      transform: translateX(-50%);
      width: 100px; /* 幅を調整 */
      height: 50px; /* 高さを調整 */
      font-size: 18px; /* フォントサイズを調整 */
      z-index: 999;
    }
  </style>
</head>
<body style="margin: 0; overflow: hidden">

  <a-scene embedded arjs vr-mode-ui="enabled: false">
    <a-entity position="1.5 -1.5 -2" rotation="0 0 0">
      <a-gltf-model src="kyoju003.glb" position="0 0 0" animation-mixer></a-gltf-model>
    </a-entity>
    <a-entity camera></a-entity>

    <!-- カスタムUIコンポーネントを追加 -->
    <a-entity custom-ui>
      <button id="captureButton" onclick="captureScreenshot()">撮影</button>
    </a-entity>
  </a-scene>

  <script>
    // glTFの表示が暗くなる問題に対処
    document.querySelector("a-scene").renderer.gammaOutput = true;

// スクリーンショットをキャプチャする関数
function captureScreenshot() {
  // A-Frameのcanvasを取得
  const canvas = document.querySelector("canvas");
  // カンバスからデータURLを取得
  const dataURL = canvas.toDataURL("image/png");
  // データURLから画像オブジェクトを作成
  const img = new Image();
  img.src = dataURL;
  // 画像が読み込まれた後に処理を行う
  img.onload = function () {
  // 新しいウィンドウを開いて画像を表示
  const newWindow = window.open();
  newWindow.document.write('<img src="' + dataURL + '" alt="AR Screenshot"/>');
  };
}
  
  </script>
</body>
</html>
